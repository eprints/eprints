#!/usr/bin/perl -w

######################################################################
#
#  Command line program for creating tables from the meta-metadata
#  files. NOTE! It doesn't actually create the database itself - a
#  database called "eprints" must already exist (without any tables).
#
######################################################################
#
#  __COPYRIGHT__
#
# Copyright 2000-2008 University of Southampton. All Rights Reserved.
# 
#  __LICENSE__
#
######################################################################

use DBI;
use EPrintSite::SiteInfo;
use EPrints::Database;
use EPrints::Session;
use EPrints::Subject;
use strict;

######################################################################
#
#  Create tables
#
######################################################################

my $session = new EPrints::Session( 1 , $ARGV[0] );

if( $session->{database}->create_archive_tables() )
{
	print "Created database tables\n";
}
else
{
	my $error = $session->{database}->error();
	print STDERR "DB Error: $error\n";
}

print STDERR "NNG___________________________\n";

######################################################################
#
#  Fill in subject database
#
######################################################################

if( EPrints::Subject::create_subject_table( $session ) )
{
	print "Inserted subject categories\n";
}
else
{
	my $error = $session->{database}->error();
	print STDERR "DB Error: $error\n";
}

$session->terminate();
